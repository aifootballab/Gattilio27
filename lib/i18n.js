// Simple i18n system - Italian/English
const translations = {
  it: {
    // Dashboard
    dashboard: 'Dashboard',
    roster: 'Roster',
    yourPlayers: 'I tuoi giocatori',
    viewPlayers: 'Visualizza Giocatori',
    manageCollection: 'Gestisci la tua collezione',
    squadOverview: 'Panoramica Squadra',
    yourSquad: 'La tua rosa',
    squadSlots: 'Rosa (21 slot)',
    startersAndBench: 'Titolari e panchina',
    tacticalGoals: 'Obiettivi Tattici Aperti',
    goals: 'Obiettivi',
    comingSoon: 'Prossimamente...',
    userProfile: 'Profilo Utente',
    anonymousUser: 'Utente Anonimo',
    masterLevel: 'Livello Master',
    aiKnowledge: 'Conoscenza AI',
    high: 'Alta',
    matchInsights: 'Insight Partita',
    analysis: 'Analisi',
    quickLinks: 'Collegamenti Rapidi',
    navigation: 'Navigazione',
    home: 'Home',
    players: 'Giocatori',
    squadBuilder: 'Costruttore Squadra',
    dataAnalytics: 'Dati e Analisi',
    memoryHub: 'Hub Memoria',
    coaching: 'Allenamento',
    memoryInsights: 'Insight Memoria',
    aiLearning: 'Apprendimento AI',
    startSession: 'Avvia Sessione',
    opponentFormation: 'Formazione Avversaria',
    analyzeOpponent: 'Analizza formazione avversaria per contromisure',
    strugglesCoachingPress: 'Struggles coaching press',
    reluctantChangeFormation: 'Reluctant to change formation',
    prefersQuickTips: 'Prefers quick, actionable tips',
    strugglesHighPress: 'Struggles against high press',
    
    // Rosa
    squad: 'Rosa',
    uploadScreenshots: 'Carica Screenshot',
    dragDropHint: 'Trascina qui oppure clicca. Puoi caricare 2 o 3 foto per giocatore, anche miste.',
    imagesLoaded: 'Immagini caricate',
    analyzeBatch: 'Analizza batch',
    analyzing: 'Analisi…',
    reset: 'Reset',
    slot: 'Slot',
    starters: 'Titolari',
    bench: 'Panchina',
    insertPlayer: 'Inserisci questo giocatore',
    saveToSupabase: 'Salva in Supabase',
    slotSelected: 'slot selezionato',
    name: 'Nome',
    role: 'Ruolo',
    card: 'Carta',
    team: 'Team',
    boosters: 'Boosters',
    missing: 'Manca',
    myPlayers: 'I Miei Giocatori',
    playersSaved: 'giocatori salvati',
    loading: 'Caricamento...',
    noPlayersSaved: 'Nessun giocatore salvato',
    uploadScreenshotsToSee: 'Carica screenshot e salva giocatori per vederli qui',
    uploadScreenshots: 'Carica Screenshot',
    details: 'Dettagli',
    hide: 'Nascondi',
    edit: 'Modifica',
    complete: 'Completo',
    incomplete: 'Incompleto',
    missingFields: 'Manca',
    nationality: 'Nazionalità',
    physical: 'Fisico',
    age: 'Età',
    form: 'Forma',
    skills: 'Skills',
    resetMyData: 'Reset miei dati Supabase',
    saved: 'Salvato in Supabase',
    resetSuccess: 'Dati Supabase resettati per questo utente anonimo',
    error: 'Errore',
    backToDashboard: 'Dashboard Principale',
    backToSquad: 'Rosa',
    
    // Opponent Formation
    opponentFormationTitle: 'Formazione Avversaria',
    opponentFormationSubtitle: 'Carica screenshot della formazione avversaria per analisi e contromisure',
    backToDashboardBtn: 'Torna alla Dashboard',
    dragScreenshotHere: 'Trascina screenshot qui',
    orClickToSelect: 'o clicca per selezionare',
    uploadedScreenshot: 'Screenshot Caricato',
    extracting: 'Estrazione...',
    extractFormation: 'Estrai Formazione',
    formationExtractedSuccess: 'Formazione estratta correttamente',
    playersDetected: 'giocatori rilevati',
    formation: 'Formazione',
    overallStrength: 'Forza Complessiva',
    tacticalStyle: 'Stile Tattico',
    team: 'Squadra',
    formationNameOptional: 'Nome formazione (opzionale)',
    saveFormation: 'Salva Formazione',
    formationSaved: 'Formazione avversaria salvata',
    saveError: 'Errore salvataggio',
    playersDetectedFromScreenshot: 'Giocatori Rilevati dalla Foto',
    verifyPlayersRead: 'Verifica che tutti i giocatori siano stati letti correttamente',
    goalkeeper: 'Portiere',
    defense: 'Difesa',
    midfield: 'Centrocampo',
    attack: 'Attacco',
    role: 'Ruolo',
    substitutes: 'Sostituti',
    reserves: 'Riserve',
    loadAnotherFormation: 'Carica Altra Formazione',
    extractionError: 'Errore estrazione',
    invalidAuthToken: 'Token di autenticazione non valido. Ricarica la pagina e riprova.',
  },
  en: {
    // Dashboard
    dashboard: 'Dashboard',
    roster: 'Roster',
    yourPlayers: 'Your Players',
    viewPlayers: 'View Players',
    manageCollection: 'Manage your collection',
    squadOverview: 'Squad Overview',
    yourSquad: 'Your Squad',
    squadSlots: 'Squad (21 slots)',
    startersAndBench: 'Starters and bench',
    tacticalGoals: 'Open Tactical Goals',
    goals: 'Goals',
    comingSoon: 'Coming soon...',
    userProfile: 'User Profile',
    anonymousUser: 'Anonymous User',
    masterLevel: 'Master Level',
    aiKnowledge: 'AI Knowledge',
    high: 'High',
    matchInsights: 'Match Insights',
    analysis: 'Analysis',
    quickLinks: 'Quick Links',
    navigation: 'Navigation',
    home: 'Home',
    players: 'Players',
    squadBuilder: 'Squad Builder',
    dataAnalytics: 'Data & Analytics',
    memoryHub: 'Memory Hub',
    coaching: 'Coaching',
    memoryInsights: 'Memory Insights',
    aiLearning: 'AI Learning',
    startSession: 'Start Session',
    opponentFormation: 'Opponent Formation',
    analyzeOpponent: 'Analyze opponent formation for countermeasures',
    strugglesCoachingPress: 'Struggles coaching press',
    reluctantChangeFormation: 'Reluctant to change formation',
    prefersQuickTips: 'Prefers quick, actionable tips',
    strugglesHighPress: 'Struggles against high press',
    
    // Rosa
    squad: 'Squad',
    uploadScreenshots: 'Upload Screenshots',
    dragDropHint: 'Drag here or click. You can upload 2 or 3 photos per player, even mixed.',
    imagesLoaded: 'Images loaded',
    analyzeBatch: 'Analyze batch',
    analyzing: 'Analyzing…',
    reset: 'Reset',
    slot: 'Slot',
    starters: 'Starters',
    bench: 'Bench',
    insertPlayer: 'Insert this player',
    saveToSupabase: 'Save to Supabase',
    slotSelected: 'selected slot',
    name: 'Name',
    role: 'Role',
    card: 'Card',
    team: 'Team',
    boosters: 'Boosters',
    missing: 'Missing',
    myPlayers: 'My Players',
    playersSaved: 'players saved',
    loading: 'Loading...',
    noPlayersSaved: 'No players saved',
    uploadScreenshotsToSee: 'Upload screenshots and save players to see them here',
    uploadScreenshots: 'Upload Screenshots',
    details: 'Details',
    hide: 'Hide',
    edit: 'Edit',
    complete: 'Complete',
    incomplete: 'Incomplete',
    missingFields: 'Missing',
    nationality: 'Nationality',
    physical: 'Physical',
    age: 'Age',
    form: 'Form',
    skills: 'Skills',
    resetMyData: 'Reset my Supabase data',
    saved: 'Saved to Supabase',
    resetSuccess: 'Supabase data reset for this anonymous user',
    error: 'Error',
    backToDashboard: 'Main Dashboard',
    backToSquad: 'Squad',
    
    // Opponent Formation
    opponentFormationTitle: 'Opponent Formation',
    opponentFormationSubtitle: 'Upload opponent formation screenshot for analysis and countermeasures',
    backToDashboardBtn: 'Back to Dashboard',
    dragScreenshotHere: 'Drag screenshot here',
    orClickToSelect: 'or click to select',
    uploadedScreenshot: 'Uploaded Screenshot',
    extracting: 'Extracting...',
    extractFormation: 'Extract Formation',
    formationExtractedSuccess: 'Formation extracted successfully',
    playersDetected: 'players detected',
    formation: 'Formation',
    overallStrength: 'Overall Strength',
    tacticalStyle: 'Tactical Style',
    team: 'Team',
    formationNameOptional: 'Formation name (optional)',
    saveFormation: 'Save Formation',
    formationSaved: 'Opponent formation saved',
    saveError: 'Save error',
    playersDetectedFromScreenshot: 'Players Detected from Screenshot',
    verifyPlayersRead: 'Verify that all players were read correctly',
    goalkeeper: 'Goalkeeper',
    defense: 'Defense',
    midfield: 'Midfield',
    attack: 'Attack',
    role: 'Role',
    substitutes: 'Substitutes',
    reserves: 'Reserves',
    loadAnotherFormation: 'Load Another Formation',
    extractionError: 'Extraction error',
    invalidAuthToken: 'Invalid authentication token. Reload the page and try again.',
  }
}

import React from 'react'

export function useTranslation() {
  const [lang, setLang] = React.useState(() => {
    if (typeof window !== 'undefined') {
      const saved = localStorage.getItem('app_language')
      return saved || 'it'
    }
    return 'it'
  })

  const t = (key) => {
    return translations[lang]?.[key] || translations.en[key] || key
  }

  const changeLanguage = (newLang) => {
    setLang(newLang)
    if (typeof window !== 'undefined') {
      localStorage.setItem('app_language', newLang)
    }
  }

  return { t, lang, changeLanguage }
}
