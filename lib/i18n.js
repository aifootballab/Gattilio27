// Simple i18n system - Italian/English
const translations = {
  it: {
    // Dashboard
    dashboard: 'Dashboard',
    roster: 'Roster',
    yourPlayers: 'I tuoi giocatori',
    viewPlayers: 'Visualizza Giocatori',
    manageCollection: 'Gestisci la tua collezione',
    squadOverview: 'Panoramica Squadra',
    yourSquad: 'La tua rosa',
    squadSlots: 'Rosa (21 slot)',
    startersAndBench: 'Titolari e panchina',
    tacticalGoals: 'Obiettivi Tattici Aperti',
    goals: 'Obiettivi',
    comingSoon: 'Prossimamente...',
    userProfile: 'Profilo Utente',
    anonymousUser: 'Utente Anonimo',
    masterLevel: 'Livello Master',
    aiKnowledge: 'Conoscenza AI',
    high: 'Alta',
    matchInsights: 'Insight Partita',
    analysis: 'Analisi',
    quickLinks: 'Collegamenti Rapidi',
    navigation: 'Navigazione',
    total: 'Totale',
    topPlayers: 'Top Giocatori',
    aiInsights: 'Insight AI',
    aiInsightsPlaceholder: 'Insights e suggerimenti AI verranno mostrati qui',
    manageFormation: 'Gestisci Formazione',
    home: 'Home',
    players: 'Giocatori',
    squadBuilder: 'Costruttore Squadra',
    dataAnalytics: 'Dati e Analisi',
    memoryHub: 'Hub Memoria',
    coaching: 'Allenamento',
    memoryInsights: 'Insight Memoria',
    aiLearning: 'Apprendimento AI',
    startSession: 'Avvia Sessione',
    opponentFormation: 'Formazione Avversaria',
    analyzeOpponent: 'Analizza formazione avversaria per contromisure',
    strugglesCoachingPress: 'DifficoltÃ  nel pressing',
    reluctantChangeFormation: 'Riluttante a cambiare formazione',
    prefersQuickTips: 'Preferisce consigli rapidi e pratici',
    strugglesHighPress: 'DifficoltÃ  contro il pressing alto',
    
    // Rosa
    squad: 'Rosa',
    uploadScreenshots: 'Carica Screenshot',
    dragDropHint: 'Trascina qui oppure clicca. Puoi caricare 2 o 3 foto per giocatore, anche miste.',
    imagesLoaded: 'Immagini caricate',
    analyzeBatch: 'Analizza batch',
    analyzing: 'Analisiâ€¦',
    reset: 'Reset',
    slot: 'Slot',
    starters: 'Titolari',
    bench: 'Panchina',
    insertPlayer: 'Inserisci questo giocatore',
    saveToSupabase: 'Salva in Supabase',
    slotSelected: 'slot selezionato',
    name: 'Nome',
    role: 'Ruolo',
    card: 'Carta',
    team: 'Team',
    boosters: 'Boosters',
    missing: 'Manca',
    missingData: 'Dati Mancanti',
    missing_detailed_stats_table: 'Statistiche Dettagliate',
    missing_skills_screen: 'Schermata AbilitÃ ',
    missing_additional_positions_screen: 'Posizioni Aggiuntive',
    missing_stats_screen: 'Schermata Statistiche',
    missing_boosters_screen: 'Schermata Boosters',
    missing_profile_screen: 'Schermata Profilo',
    myPlayers: 'I Miei Giocatori',
    playersSaved: 'giocatori salvati',
    loading: 'Caricamento...',
    noPlayersSaved: 'Nessun giocatore salvato',
    uploadScreenshotsToSee: 'Carica screenshot e salva giocatori per vederli qui',
    listaGiocatori: 'Lista Giocatori',
    takePhoto: 'Scatta Foto',
    extractData: 'Estrai Dati',
    extracting: 'Estrazione...',
    savePlayer: 'Salva Giocatore',
    removePhotos: 'Rimuovi Foto',
    details: 'Dettagli',
    hide: 'Nascondi',
    edit: 'Modifica',
    complete: 'Completo',
    incomplete: 'Incompleto',
    missingFields: 'Manca',
    nationality: 'NazionalitÃ ',
    physical: 'Fisico',
    age: 'EtÃ ',
    form: 'Forma',
    skills: 'Skills',
    // Caratteristiche giocatore
    weakFoot: 'Piede Debole',
    weakFootFrequency: 'Frequenza Piede Debole',
    weakFootAccuracy: 'Precisione Piede Debole',
    formDetailed: 'Forma Dettagliata',
    injuryResistance: 'Resistenza Infortuni',
    aiPlaystyles: 'Stili di Gioco IA',
    additionalPositions: 'Posizioni Aggiuntive',
    // Valori caratteristiche
    rarely: 'Raramente',
    sometimes: 'A Volte',
    often: 'Spesso',
    high: 'Alta',
    medium: 'Media',
    low: 'Bassa',
    unbreakable: 'Incrollabile',
    stable: 'Stabile',
    inconsistent: 'Instabile',
    // Valori form
    b: 'B',
    a: 'A',
    c: 'C',
    d: 'D',
    e: 'E',
    resetMyData: 'Reset miei dati Supabase',
    // Edit Player Data
    completeData: 'Completa Dati',
    missingDataSection: 'Dati Mancanti',
    addMissingData: 'Aggiungi Dati Mancanti',
    editPlayerData: 'Modifica Dati Giocatore',
    close: 'Chiudi',
    save: 'Salva',
    saving: 'Salvataggio...',
    saved: 'Dati salvati',
    statsDetails: 'Statistiche Dettagliate',
    attacking: 'Attacco',
    defending: 'Difesa',
    athleticism: 'Forza',
    physicalData: 'Dati Fisici',
    height: 'Altezza',
    weight: 'Peso',
    teamName: 'Nome Squadra',
    nationalityCountry: 'NazionalitÃ ',
    playingStyle: 'Stile di Gioco',
    playerSkills: 'AbilitÃ  Giocatore',
    addSkill: 'Aggiungi Skill',
    removeSkill: 'Rimuovi',
    additionalSkills: 'AbilitÃ  Aggiuntive',
    addAdditionalSkill: 'Aggiungi AbilitÃ ',
    aiPlaystylesList: 'Stili di Gioco IA',
    addPlaystyle: 'Aggiungi Stile',
    additionalPositionsList: 'Posizioni Aggiuntive',
    addPosition: 'Aggiungi Posizione',
    boostersList: 'Boosters',
    addBooster: 'Aggiungi Booster',
    boosterName: 'Nome Booster',
    boosterEffect: 'Effetto',
    boosterCondition: 'Condizione di Attivazione',
    characteristics: 'Caratteristiche',
    weakFootFrequencyLabel: 'Frequenza Piede Debole',
    weakFootAccuracyLabel: 'Precisione Piede Debole',
    formDetailedLabel: 'Forma Dettagliata',
    injuryResistanceLabel: 'Resistenza Infortuni',
    cm: 'cm',
    kg: 'kg',
    years: 'anni',
    saved: 'Salvato in Supabase',
    resetSuccess: 'Dati Supabase resettati per questo utente anonimo',
    error: 'Errore',
    backToDashboard: 'Dashboard Principale',
    backToSquad: 'Rosa',
    
    // Authentication
    login: 'Accedi',
    signup: 'Registrati',
    logout: 'Esci',
    email: 'Email',
    password: 'Password',
    emailPlaceholder: 'tua@email.com',
    passwordPlaceholder: 'Minimo 6 caratteri',
    loginDescription: 'Accedi per salvare i tuoi dati permanentemente',
    signupDescription: 'Crea un account per salvare la tua rosa e profilazione',
    emailPasswordRequired: 'Email e password sono obbligatorie',
    loginError: 'Errore durante il login',
    signupError: 'Errore durante la registrazione',
    loginSuccess: 'Login effettuato con successo!',
    signupSuccess: 'Registrazione completata!',
    loggingIn: 'Accesso in corso...',
    signingUp: 'Registrazione in corso...',
    noAccountSignup: 'Non hai un account? Registrati',
    hasAccountLogin: 'Hai giÃ  un account? Accedi',
    continueAsGuest: 'Continua come ospite',
    supabaseNotAvailable: 'Supabase non disponibile',
    unexpectedError: 'Errore imprevisto',
    loggedInAs: 'Accesso come',
    
    // Statistics translations
    offensive_awareness: 'Comportamento Offensivo',
    ball_control: 'Controllo Palla',
    dribbling: 'Dribbling',
    tight_possession: 'Possesso Stretto',
    low_pass: 'Passaggio Rasoterra',
    lofted_pass: 'Passaggio Alto',
    finishing: 'Finalizzazione',
    heading: 'Colpo di Testa',
    place_kicking: 'Calci da Fermo',
    curl: 'Tiro a Giro',
    defensive_awareness: 'Comportamento Difensivo',
    defensive_engagement: 'Coinvolgimento Difensivo',
    tackling: 'Contrasto',
    aggression: 'AggressivitÃ ',
    goalkeeping: 'Comportamento PT',
    gk_catching: 'Presa PT',
    gk_parrying: 'Parata PT',
    gk_reflexes: 'Riflessi PT',
    gk_reach: 'Estensione PT',
    speed: 'VelocitÃ ',
    acceleration: 'Accelerazione',
    kicking_power: 'Potenza di Tiro',
    jump: 'Salto',
    physical_contact: 'Contatto Fisico',
    balance: 'Controllo Corpo',
    stamina: 'Resistenza',
    
    // Opponent Formation
    opponentFormationTitle: 'Formazione Avversaria',
    opponentFormationSubtitle: 'Carica screenshot della formazione avversaria per analisi e contromisure',
    backToDashboardBtn: 'Torna alla Dashboard',
    dragScreenshotHere: 'Trascina screenshot qui',
    orClickToSelect: 'o clicca per selezionare',
    uploadedScreenshot: 'Screenshot Caricato',
    extracting: 'Estrazione...',
    extractFormation: 'Estrai Formazione',
    formationExtractedSuccess: 'Formazione estratta correttamente',
    playersDetected: 'giocatori rilevati',
    formation: 'Formazione',
    overallStrength: 'Forza Complessiva',
    tacticalStyle: 'Stile Tattico',
    team: 'Squadra',
    formationNameOptional: 'Nome formazione (opzionale)',
    saveFormation: 'Salva Formazione',
    formationSaved: 'Formazione avversaria salvata',
    saveError: 'Errore salvataggio',
    playersDetectedFromScreenshot: 'Giocatori Rilevati dalla Foto',
    verifyPlayersRead: 'Verifica che tutti i giocatori siano stati letti correttamente',
    goalkeeper: 'Portiere',
    defense: 'Difesa',
    midfield: 'Centrocampo',
    attack: 'Attacco',
    role: 'Ruolo',
    substitutes: 'Sostituti',
    reserves: 'Riserve',
    loadAnotherFormation: 'Carica Altra Formazione',
    extractionError: 'Errore estrazione',
    invalidAuthToken: 'Token di autenticazione non valido. Ricarica la pagina e riprova.',
    saveError: 'Errore salvataggio',
    // Completeness
    completeness: 'Completezza',
    identity: 'Identity',
    stats: 'Stats',
    skills: 'Skills',
    boosters: 'Boosters',
    complete: 'Completo',
    incomplete: 'Incompleto',
    processingImage: 'Processando immagine',
    of: 'di',
    multiPlayerDetected: 'Rilevati giocatori diversi',
    loadSamePlayer: 'Carica 1-3 screenshot dello stesso giocatore per avere dati completi',
    missingStatsPhoto: 'Carica screenshot con statistiche dettagliate',
    missingSkillsPhoto: 'Carica screenshot con abilitÃ  e stili di gioco',
    missingBoostersPhoto: 'Carica screenshot con boosters',
    incompleteDataWarning: 'Dati incompleti: carica le foto mancanti per completare il profilo',
    // Formation
    uploadFormation: 'Carica Formazione',
    uploadFormationPhoto: 'Carica Foto Formazione Completa',
    formationInstructions: 'Carica uno screenshot della formazione completa (11 giocatori sul campo). I giocatori saranno automaticamente identificati come titolari.',
    uploadPlayerCard: 'Carica Card Giocatore',
    playerCardInstructions: 'Carica 1-3 screenshot di card giocatori singoli (statistiche, abilitÃ , booster). Questi saranno salvati come riserve.',
    selectUploadType: 'Seleziona Tipo Caricamento',
    extractFormation: 'Estrai Formazione',
    extractingFormation: 'Estrazione formazione in corso...',
    formationExtracted: 'Formazione estratta con successo',
    playersExtracted: 'giocatori estratti',
    savingFormation: 'Salvataggio formazione...',
    formationSaved: 'Formazione salvata con successo',
    formationLayoutSaved: 'Layout formazione salvato! Vai a "Gestisci Formazione" per assegnare i giocatori.',
    titolari: 'Titolari',
    riserve: 'Riserve',
    swapFormation: 'Gestisci Formazione',
    instructions: 'Istruzioni',
    // Tactical Settings - Team Playing Style
    teamPlayingStyle: 'Stile di Gioco di Squadra',
    teamPlayingStyleDescription: 'Seleziona l\'approccio tattico per la tua squadra',
    // Individual Instructions
    individualInstructions: 'Istruzioni Individuali',
    individualInstructionsDescription: 'Assegna istruzioni specifiche ai giocatori',
    attack1: 'Attacco 1',
    attack1Description: 'Istruzioni per giocatori d\'attacco (lato sinistro)',
    attack2: 'Attacco 2',
    attack2Description: 'Istruzioni per giocatori d\'attacco (lato destro)',
    defense1: 'Difesa 1',
    defense1Description: 'Istruzioni per giocatori difensivi (lato sinistro)',
    defense2: 'Difesa 2',
    defense2Description: 'Istruzioni per giocatori difensivi (lato destro)',
    selectInstruction: 'Seleziona Istruzione',
    selectPlayer: 'Seleziona Giocatore',
    instruction: 'Istruzione',
    player: 'Giocatore',
    noPlayerSelected: 'Nessun giocatore selezionato',
    noInstructionSelected: 'Nessuna istruzione selezionata',
    noCompatiblePlayers: 'Nessun giocatore compatibile disponibile',
    // Individual Instructions - Attack
    anchoring: 'Ancoraggio',
    anchoringDescription: 'Il giocatore rimane in posizione fissa, mantiene densitÃ  centrale',
    attackSpace: 'Attacco Spazio',
    attackSpaceDescription: 'Il giocatore cerca spazi in profonditÃ  per creare occasioni da gol',
    counterTarget: 'Contropiede',
    counterTargetDescription: 'Il giocatore Ã¨ il bersaglio per i contropiedi, resta alto pronto per transizioni rapide',
    offensive: 'Offensivo',
    offensiveDescription: 'Il giocatore partecipa attivamente agli attacchi, si spinge in avanti',
    // Individual Instructions - Defense
    deepLine: 'Linea Bassa',
    deepLineDescription: 'Il giocatore arretra, si allinea con i difensori, copre gli spazi dietro',
    defensive: 'Difensivo',
    defensiveDescription: 'Il giocatore resta dietro, limita le corse in avanti, protegge dai contropiedi',
    tightMarking: 'Marcatura Stretta',
    tightMarkingDescription: 'Il giocatore marca l\'avversario da vicino, segue i movimenti',
    manMarking: 'Marcatura a Uomo',
    manMarkingDescription: 'Il giocatore marca un avversario specifico uno contro uno per tutta la partita',
    // Tactical Settings - Save
    tacticalSettings: 'Impostazioni Tattiche',
    saveTacticalSettings: 'Salva Impostazioni Tattiche',
    tacticalSettingsSaved: 'Impostazioni tattiche salvate con successo',
    tacticalSettingsError: 'Errore nel salvataggio delle impostazioni tattiche',
    loadingTacticalSettings: 'Caricamento impostazioni tattiche...',
    // Guide dettagliate
    guideFormationTitle: 'Come caricare una formazione',
    guideFormationStep1: '1. Seleziona "Carica Formazione"',
    guideFormationStep2: '2. Carica UNO screenshot della formazione completa (11 giocatori sul campo)',
    guideFormationStep3: '3. Clicca "Estrai Formazione" per analizzare',
    guideFormationStep4: '4. I 11 giocatori verranno salvati automaticamente come TITOLARI',
    guideFormationNote: 'ðŸ’¡ I giocatori vengono identificati dalla loro posizione sul campo (slot 0-10)',
    guideCardTitle: 'Come caricare riserve',
    guideCardStep1: '1. Seleziona "Carica Card Giocatore"',
    guideCardStep2: '2. Carica 1-3 screenshot di card giocatori singoli (statistiche, abilitÃ , booster)',
    guideCardStep3: '3. Clicca "Estrai Dati" per analizzare ogni card',
    guideCardStep4: '4. I giocatori verranno salvati automaticamente come RISERVE',
    guideCardNote: 'ðŸ’¡ Puoi caricare fino a 3 card alla volta',
    guideSwapTitle: 'Come scambiare giocatori',
    guideSwapStep1: '1. Clicca su un giocatore (titolare o riserva)',
    guideSwapStep2: '2. Clicca su un altro giocatore per scambiare le loro posizioni',
    guideSwapStep3: '3. Il giocatore titolare diventerÃ  riserva e viceversa',
    guideSwapNote: 'ðŸ’¡ Puoi scambiare solo giocatori della tua rosa',
    guideEmptyFormation: 'Nessuna formazione caricata. Carica prima uno screenshot della formazione completa.',
    guideEmptyReserves: 'Nessuna riserva. Carica card giocatori singoli per aggiungere riserve.',
    whatIsFormation: 'Cos\'Ã¨ una formazione?',
    whatIsFormationDesc: 'Una formazione Ã¨ uno screenshot che mostra tutti gli 11 giocatori sul campo. Caricando una formazione, i giocatori vengono automaticamente identificati come TITOLARI.',
    whatIsCard: 'Cos\'Ã¨ una card giocatore?',
    whatIsCardDesc: 'Una card Ã¨ uno screenshot di un singolo giocatore che mostra le sue statistiche, abilitÃ  e booster. Le card vengono salvate come RISERVE.',
    whatIsSwap: 'Come funziona lo scambio?',
    whatIsSwapDesc: 'Clicca su un giocatore per selezionarlo, poi clicca su un altro per scambiare le loro posizioni. Un titolare diventa riserva e viceversa.',
    // Campo 2D
    noFormationLoaded: 'Nessuna formazione caricata',
    loadFormationFirst: 'Carica prima uno screenshot della formazione completa per vedere il campo 2D',
    clickToAssign: 'Clicca per assegnare',
    assignPlayer: 'Assegna Giocatore',
    modifySlot: 'Modifica Slot',
    currentPlayer: 'Giocatore attuale',
    removeFromSlot: 'Rimuovi da Slot',
    deletePermanently: 'Elimina Definitivamente',
    moveToReserves: 'Sposta in Riserve',
    photoUploadedSuccessfully: 'Foto caricata con successo!',
    playerAssignedSuccessfully: 'Giocatore assegnato con successo!',
    playerDeletedSuccessfully: 'Giocatore eliminato con successo!',
    playerMovedToReserves: 'Giocatore spostato in riserve!',
    tacticalSettingsSaved: 'Impostazioni tattiche salvate con successo!',
    errorUploadingPhoto: 'Errore nel caricamento della foto',
    errorAssigningPlayer: 'Errore nell\'assegnazione del giocatore',
    errorDeletingPlayer: 'Errore nell\'eliminazione del giocatore',
    errorMovingPlayer: 'Errore nello spostamento del giocatore',
    errorSavingTacticalSettings: 'Errore nel salvataggio delle impostazioni tattiche',
    uploadPlayerPhoto: 'Carica Foto Giocatore',
    changePlayer: 'Cambia Giocatore (Carica Foto)',
    orSelectFromReserves: 'Oppure seleziona da riserve',
    noFormationMessage: 'Nessuna formazione caricata. Carica prima uno screenshot della formazione completa per vedere il campo 2D',
    changeFormation: 'Cambia Formazione',
    importFromScreenshot: 'Importa da Screenshot (Avanzato)',
    removeFromSlot: 'Rimuovi da Slot',
    deletePermanently: 'Elimina Definitivamente',
    remove: 'Rimuovi',
    loadReserve: 'Carica Riserva',
    completeProfile: 'Completa Profilo',
    partialProfile: 'Profilo parziale',
    clickToComplete: 'Clicca "Completa Profilo" per aggiungere dati mancanti',
    sectionsCompleted: 'sezioni completate',
    deleteReserve: 'Elimina Riserva',
    confirmDeleteReserve: 'Sei sicuro di voler eliminare definitivamente questo giocatore dalle riserve?',
    deleteReserveError: 'Errore eliminazione giocatore',
    back: 'Indietro',
    details: 'Dettagli Giocatore',
    assignPlayer: 'Assegna Giocatore',
    slot: 'Slot',
    playerInfo: 'Info Giocatore',
    age: 'EtÃ ',
    club: 'Club',
    nationality: 'NazionalitÃ ',
    playingStyle: 'Stile di Gioco',
    years: 'anni',
    overallRating: 'Overall',
    uploadOneImageOnly: 'Carica una sola immagine alla volta',
    saveAndUpdate: 'Salva e Aggiorna',
    createFormation: 'Crea la tua formazione',
    selectFormationDesc: 'Seleziona una formazione tattica predefinita per iniziare. Poi potrai caricare le carte dei giocatori per ogni slot.',
    createFormationBtn: 'Crea Formazione',
    updatePhoto: 'Aggiorna Foto',
    uploadModifyPhoto: 'Carica/Modifica Foto',
    slotInfo: 'Slot',
    currentPlayerInfo: 'Giocatore attuale',
    extractedDataFromPhoto: 'Dati Estratti da Foto',
    statsSection: 'Statistiche',
    skillsSection: 'AbilitÃ ',
    boostersSection: 'Boosters',
    notAvailable: 'Non disponibili',
    extractedFromCard: '(estratti da card)',
    profileComplete: 'Profilo Completo',
    sectionsCompleted: 'sezioni completate',
    statsNotAvailable: 'Statistiche non disponibili',
    boostersNotAvailable: 'Booster non disponibili',
    skillsLabel: 'SKILLS',
    comSkillsLabel: 'COM SKILLS',
    activeBoosters: 'BOOSTER ATTIVI',
    effect: 'Effetto',
    condition: 'Condizione',
    statsLabel: 'Statistiche',
    skillsBoosterLabel: 'AbilitÃ /Booster',
    name: 'Nome',
    team: 'Squadra',
    role: 'Ruolo',
    nA: 'N/A',
  },
  en: {
    // Dashboard
    dashboard: 'Dashboard',
    roster: 'Roster',
    yourPlayers: 'Your Players',
    viewPlayers: 'View Players',
    manageCollection: 'Manage your collection',
    squadOverview: 'Squad Overview',
    yourSquad: 'Your Squad',
    squadSlots: 'Squad (21 slots)',
    startersAndBench: 'Starters and bench',
    tacticalGoals: 'Open Tactical Goals',
    goals: 'Goals',
    comingSoon: 'Coming soon...',
    userProfile: 'User Profile',
    anonymousUser: 'Anonymous User',
    masterLevel: 'Master Level',
    aiKnowledge: 'AI Knowledge',
    high: 'High',
    matchInsights: 'Match Insights',
    analysis: 'Analysis',
    quickLinks: 'Quick Links',
    navigation: 'Navigation',
    total: 'Total',
    aiInsights: 'AI Insights',
    aiInsightsPlaceholder: 'AI insights and suggestions will be shown here',
    home: 'Home',
    players: 'Players',
    squadBuilder: 'Squad Builder',
    dataAnalytics: 'Data & Analytics',
    memoryHub: 'Memory Hub',
    coaching: 'Coaching',
    memoryInsights: 'Memory Insights',
    aiLearning: 'AI Learning',
    startSession: 'Start Session',
    opponentFormation: 'Opponent Formation',
    analyzeOpponent: 'Analyze opponent formation for countermeasures',
    strugglesCoachingPress: 'Struggles coaching press',
    reluctantChangeFormation: 'Reluctant to change formation',
    prefersQuickTips: 'Prefers quick, actionable tips',
    strugglesHighPress: 'Struggles against high press',
    
    // Rosa
    squad: 'Squad',
    uploadScreenshots: 'Upload Screenshots',
    dragDropHint: 'Drag here or click. You can upload 2 or 3 photos per player, even mixed.',
    imagesLoaded: 'Images loaded',
    analyzeBatch: 'Analyze batch',
    analyzing: 'Analyzingâ€¦',
    reset: 'Reset',
    slot: 'Slot',
    starters: 'Starters',
    bench: 'Bench',
    insertPlayer: 'Insert this player',
    saveToSupabase: 'Save to Supabase',
    slotSelected: 'selected slot',
    name: 'Name',
    role: 'Role',
    card: 'Card',
    team: 'Team',
    boosters: 'Boosters',
    missing: 'Missing',
    missingData: 'Missing Data',
    missing_detailed_stats_table: 'Detailed Statistics',
    missing_skills_screen: 'Skills Screen',
    missing_additional_positions_screen: 'Additional Positions',
    missing_stats_screen: 'Statistics Screen',
    missing_boosters_screen: 'Boosters Screen',
    missing_profile_screen: 'Profile Screen',
    myPlayers: 'My Players',
    playersSaved: 'players saved',
    loading: 'Loading...',
    noPlayersSaved: 'No players saved',
    uploadScreenshotsToSee: 'Upload screenshots and save players to see them here',
    listaGiocatori: 'Players List',
    details: 'Details',
    hide: 'Hide',
    edit: 'Edit',
    complete: 'Complete',
    incomplete: 'Incomplete',
    missingFields: 'Missing',
    nationality: 'Nationality',
    physical: 'Physical',
    age: 'Age',
    form: 'Form',
    skills: 'Skills',
    // Player characteristics
    weakFoot: 'Weak Foot',
    weakFootFrequency: 'Weak Foot Frequency',
    weakFootAccuracy: 'Weak Foot Accuracy',
    formDetailed: 'Detailed Form',
    injuryResistance: 'Injury Resistance',
    aiPlaystyles: 'AI Playstyles',
    additionalPositions: 'Additional Positions',
    // Characteristic values
    rarely: 'Rarely',
    sometimes: 'Sometimes',
    often: 'Often',
    high: 'High',
    medium: 'Medium',
    low: 'Low',
    unbreakable: 'Unbreakable',
    stable: 'Stable',
    inconsistent: 'Inconsistent',
    // Form values
    b: 'B',
    a: 'A',
    c: 'C',
    d: 'D',
    e: 'E',
    resetMyData: 'Reset my Supabase data',
    // Edit Player Data
    completeData: 'Complete Data',
    missingDataSection: 'Missing Data',
    addMissingData: 'Add Missing Data',
    editPlayerData: 'Edit Player Data',
    close: 'Close',
    save: 'Save',
    saving: 'Saving...',
    saved: 'Data saved',
    statsDetails: 'Detailed Statistics',
    attacking: 'Attack',
    defending: 'Defense',
    athleticism: 'Strength',
    physicalData: 'Physical Data',
    height: 'Height',
    weight: 'Weight',
    teamName: 'Team Name',
    nationalityCountry: 'Nationality',
    playingStyle: 'Playing Style',
    playerSkills: 'Player Skills',
    addSkill: 'Add Skill',
    removeSkill: 'Remove',
    additionalSkills: 'Additional Skills',
    addAdditionalSkill: 'Add Skill',
    aiPlaystylesList: 'AI Playstyles',
    addPlaystyle: 'Add Playstyle',
    additionalPositionsList: 'Additional Positions',
    addPosition: 'Add Position',
    boostersList: 'Boosters',
    addBooster: 'Add Booster',
    boosterName: 'Booster Name',
    boosterEffect: 'Effect',
    boosterCondition: 'Activation Condition',
    characteristics: 'Characteristics',
    weakFootFrequencyLabel: 'Weak Foot Frequency',
    weakFootAccuracyLabel: 'Weak Foot Accuracy',
    formDetailedLabel: 'Detailed Form',
    injuryResistanceLabel: 'Injury Resistance',
    cm: 'cm',
    kg: 'kg',
    years: 'years',
    saved: 'Saved to Supabase',
    resetSuccess: 'Supabase data reset for this anonymous user',
    error: 'Error',
    backToDashboard: 'Main Dashboard',
    backToSquad: 'Squad',
    
    // Authentication
    login: 'Login',
    signup: 'Sign Up',
    logout: 'Logout',
    email: 'Email',
    password: 'Password',
    emailPlaceholder: 'your@email.com',
    passwordPlaceholder: 'Minimum 6 characters',
    loginDescription: 'Login to save your data permanently',
    signupDescription: 'Create an account to save your roster and profiling',
    emailPasswordRequired: 'Email and password are required',
    loginError: 'Error during login',
    signupError: 'Error during signup',
    loginSuccess: 'Login successful!',
    signupSuccess: 'Signup completed!',
    loggingIn: 'Logging in...',
    signingUp: 'Signing up...',
    noAccountSignup: "Don't have an account? Sign up",
    hasAccountLogin: 'Already have an account? Login',
    continueAsGuest: 'Continue as guest',
    supabaseNotAvailable: 'Supabase not available',
    unexpectedError: 'Unexpected error',
    loggedInAs: 'Logged in as',
    
    // Statistics translations
    offensive_awareness: 'Offensive Awareness',
    ball_control: 'Ball Control',
    dribbling: 'Dribbling',
    tight_possession: 'Tight Possession',
    low_pass: 'Low Pass',
    lofted_pass: 'Lofted Pass',
    finishing: 'Finishing',
    heading: 'Heading',
    place_kicking: 'Set Piece Taking',
    curl: 'Curl',
    defensive_awareness: 'Defensive Awareness',
    defensive_engagement: 'Defensive Engagement',
    tackling: 'Tackling',
    aggression: 'Aggression',
    goalkeeping: 'Goalkeeping',
    gk_catching: 'GK Catching',
    gk_parrying: 'GK Parrying',
    gk_reflexes: 'GK Reflexes',
    gk_reach: 'GK Reach',
    speed: 'Speed',
    acceleration: 'Acceleration',
    kicking_power: 'Kicking Power',
    jump: 'Jump',
    physical_contact: 'Physical Contact',
    balance: 'Body Control',
    stamina: 'Stamina',
    
    // Opponent Formation
    opponentFormationTitle: 'Opponent Formation',
    opponentFormationSubtitle: 'Upload opponent formation screenshot for analysis and countermeasures',
    backToDashboardBtn: 'Back to Dashboard',
    dragScreenshotHere: 'Drag screenshot here',
    orClickToSelect: 'or click to select',
    uploadedScreenshot: 'Uploaded Screenshot',
    extracting: 'Extracting...',
    extractFormation: 'Extract Formation',
    formationExtractedSuccess: 'Formation extracted successfully',
    playersDetected: 'players detected',
    formation: 'Formation',
    overallStrength: 'Overall Strength',
    tacticalStyle: 'Tactical Style',
    team: 'Team',
    formationNameOptional: 'Formation name (optional)',
    saveFormation: 'Save Formation',
    formationSaved: 'Opponent formation saved',
    saveError: 'Save error',
    playersDetectedFromScreenshot: 'Players Detected from Screenshot',
    verifyPlayersRead: 'Verify that all players were read correctly',
    goalkeeper: 'Goalkeeper',
    defense: 'Defense',
    midfield: 'Midfield',
    attack: 'Attack',
    role: 'Role',
    substitutes: 'Substitutes',
    reserves: 'Reserves',
    loadAnotherFormation: 'Load Another Formation',
    extractionError: 'Extraction error',
    invalidAuthToken: 'Invalid authentication token. Reload the page and try again.',
    saveError: 'Save error',
    // Completeness
    completeness: 'Completeness',
    identity: 'Identity',
    stats: 'Stats',
    skills: 'Skills',
    boosters: 'Boosters',
    complete: 'Complete',
    incomplete: 'Incomplete',
    processingImage: 'Processing image',
    of: 'of',
    multiPlayerDetected: 'Different players detected',
    loadSamePlayer: 'Load 1-3 screenshots of the same player for complete data',
    missingStatsPhoto: 'Load screenshot with detailed statistics',
    missingSkillsPhoto: 'Load screenshot with skills and playstyles',
    missingBoostersPhoto: 'Load screenshot with boosters',
    incompleteDataWarning: 'Incomplete data: load missing photos to complete profile',
    // Formation
    uploadFormation: 'Upload Formation',
    uploadFormationPhoto: 'Upload Complete Formation Photo',
    formationInstructions: 'Upload a screenshot of the complete formation (11 players on the field). Players will be automatically identified as starters.',
    uploadPlayerCard: 'Upload Player Card',
    playerCardInstructions: 'Upload 1-3 screenshots of single player cards (stats, skills, booster). These will be saved as reserves.',
    selectUploadType: 'Select Upload Type',
    extractFormation: 'Extract Formation',
    extractingFormation: 'Extracting formation...',
    formationExtracted: 'Formation extracted successfully',
    playersExtracted: 'players extracted',
    savingFormation: 'Saving formation...',
    formationSaved: 'Formation saved successfully',
    titolari: 'Starters',
    riserve: 'Reserves',
    swapFormation: 'Manage Formation',
    manageFormation: 'Manage Formation',
    instructions: 'Instructions',
    // Detailed guides
    guideFormationTitle: 'How to upload a formation',
    guideFormationStep1: '1. Select "Upload Formation"',
    guideFormationStep2: '2. Upload ONE screenshot of the complete formation (11 players on the field)',
    guideFormationStep3: '3. Click "Extract Formation" to analyze',
    guideFormationStep4: '4. The 11 players will be automatically saved as STARTERS',
    guideFormationNote: 'ðŸ’¡ Players are identified by their field position (slot 0-10)',
    guideCardTitle: 'How to upload reserves',
    guideCardStep1: '1. Select "Upload Player Card"',
    guideCardStep2: '2. Upload 1-3 screenshots of single player cards (stats, skills, booster)',
    guideCardStep3: '3. Click "Extract Data" to analyze each card',
    guideCardStep4: '4. Players will be automatically saved as RESERVES',
    guideCardNote: 'ðŸ’¡ You can upload up to 3 cards at once',
    guideSwapTitle: 'How to swap players',
    guideSwapStep1: '1. Click on a player (starter or reserve)',
    guideSwapStep2: '2. Click on another player to swap their positions',
    guideSwapStep3: '3. The starter will become a reserve and vice versa',
    guideSwapNote: 'ðŸ’¡ You can only swap players from your roster',
    guideEmptyFormation: 'No formation uploaded. Upload a screenshot of the complete formation first.',
    guideEmptyReserves: 'No reserves. Upload single player cards to add reserves.',
    whatIsFormation: 'What is a formation?',
    whatIsFormationDesc: 'A formation is a screenshot showing all 11 players on the field. By uploading a formation, players are automatically identified as STARTERS.',
    whatIsCard: 'What is a player card?',
    whatIsCardDesc: 'A card is a screenshot of a single player showing their stats, skills and booster. Cards are saved as RESERVES.',
    whatIsSwap: 'How does swapping work?',
    whatIsSwapDesc: 'Click on a player to select it, then click on another to swap their positions. A starter becomes a reserve and vice versa.',
    // 2D Field
    noFormationLoaded: 'No formation loaded',
    loadFormationFirst: 'Upload a screenshot of the complete formation first to see the 2D field',
    clickToAssign: 'Click to assign',
    assignPlayer: 'Assign Player',
    modifySlot: 'Modify Slot',
    currentPlayer: 'Current player',
    removeFromSlot: 'Remove from Slot',
    deletePermanently: 'Delete Permanently',
    moveToReserves: 'Move to Reserves',
    photoUploadedSuccessfully: 'Photo uploaded successfully!',
    playerAssignedSuccessfully: 'Player assigned successfully!',
    playerDeletedSuccessfully: 'Player deleted successfully!',
    playerMovedToReserves: 'Player moved to reserves!',
    tacticalSettingsSaved: 'Tactical settings saved successfully!',
    errorUploadingPhoto: 'Error uploading photo',
    errorAssigningPlayer: 'Error assigning player',
    errorDeletingPlayer: 'Error deleting player',
    errorMovingPlayer: 'Error moving player',
    errorSavingTacticalSettings: 'Error saving tactical settings',
    uploadPlayerPhoto: 'Upload Player Photo',
    changePlayer: 'Change Player (Upload Photo)',
    orSelectFromReserves: 'Or select from reserves',
    noFormationMessage: 'No formation loaded. Upload a screenshot of the complete formation first to see the 2D field',
    changeFormation: 'Change Formation',
    importFromScreenshot: 'Import from Screenshot (Advanced)',
    removeFromSlot: 'Remove from Slot',
    deletePermanently: 'Delete Permanently',
    remove: 'Remove',
    loadReserve: 'Load Reserve',
    completeProfile: 'Complete Profile',
    partialProfile: 'Partial Profile',
    clickToComplete: 'Click "Complete Profile" to add missing data',
    sectionsCompleted: 'sections completed',
    deleteReserve: 'Delete Reserve',
    confirmDeleteReserve: 'Are you sure you want to permanently delete this player from reserves?',
    deleteReserveError: 'Error deleting player',
    back: 'Back',
    details: 'Player Details',
    assignPlayer: 'Assign Player',
    slot: 'Slot',
    playerInfo: 'Player Info',
    age: 'Age',
    club: 'Club',
    nationality: 'Nationality',
    playingStyle: 'Playing Style',
    years: 'years',
    overallRating: 'Overall',
    topPlayers: 'Top Players',
    createFormation: 'Create Your Formation',
    selectFormationDesc: 'Select a predefined tactical formation to start. Then you can upload player cards for each slot.',
    createFormationBtn: 'Create Formation',
    updatePhoto: 'Update Photo',
    uploadModifyPhoto: 'Upload/Modify Photo',
    slotInfo: 'Slot',
    currentPlayerInfo: 'Current player',
    extractedDataFromPhoto: 'Data Extracted from Photo',
    statsSection: 'Statistics',
    skillsSection: 'Skills',
    boostersSection: 'Boosters',
    notAvailable: 'Not available',
    extractedFromCard: '(extracted from card)',
    profileComplete: 'Profile Complete',
    statsNotAvailable: 'Statistics not available',
    boostersNotAvailable: 'Boosters not available',
    skillsLabel: 'SKILLS',
    comSkillsLabel: 'COM SKILLS',
    activeBoosters: 'ACTIVE BOOSTERS',
    effect: 'Effect',
    condition: 'Condition',
    statsLabel: 'Statistics',
    skillsBoosterLabel: 'Skills/Boosters',
    position: 'Position',
    overall: 'Overall',
    name: 'Name',
    team: 'Team',
    role: 'Role',
    nA: 'N/A',
    upload: 'Upload',
    uploadPlayer: 'Upload Player',
    uploadOneImageOnly: 'Upload one image at a time',
    saveAndUpdate: 'Save and Update',
    updateStats: 'Update Statistics',
    uploadStats: 'Upload Statistics',
    updateSkills: 'Update Skills',
    uploadSkills: 'Upload Skills',
    updateBoosters: 'Update Boosters',
    uploadBoosters: 'Upload Boosters',
    confirmUpdate: 'Confirm Update',
    loadFormation: 'Load Formation',
    loadFirstReserve: 'Load First Reserve',
    extractedData: 'Data Extracted from Photo',
    // Coaches
    coaches: 'Coaches',
    coachesTitle: 'Coaches',
    uploadCoach: 'Upload Coach',
    noCoachesLoaded: 'No coaches loaded',
    uploadCoachDescription: 'Upload a coach by loading a screenshot from the game',
    uploadFirstCoach: 'Upload First Coach',
    activeCoach: 'Active Coach',
    activeCoachInfo: 'This coach is currently active and influences the team\'s playing style competence.',
    coachDetails: 'Coach Details',
    viewCoachDetails: 'Coach Details',
    setAsTitular: 'Set as Titular',
    deleteCoach: 'Delete Coach',
    confirmDeleteCoach: 'Are you sure you want to delete this coach?',
    selectCoachScreenshot: 'Select coach screenshot:',
    coachUploaded: 'Coach uploaded',
    coachDeleted: 'Coach deleted',
    coachSetActive: 'Coach set as titular',
    informations: 'Information',
    playingStyleCompetence: 'Playing Style Competence',
    trainingAffinity: 'Training Affinity',
    statBoosters: 'Stat Boosters',
    connection: 'Connection',
    focalPoint: 'Focal Point',
    keyMan: 'Key Man',
    coachesLink: 'Coaches',
    coachActiveTitle: 'Active Coach',
    // Errors
    sessionExpired: 'Session expired',
    unknownError: 'Unknown error',
    coachLoadError: 'Error loading coaches',
    coachDataLoadError: 'Error loading data',
    coachSaveError: 'Error saving coach',
    coachUploadError: 'Error uploading coach',
    coachSetActiveError: 'Error setting active coach',
    coachDeleteError: 'Error deleting coach',
    coachExtractError: 'Error: coach data not extracted. Check images and try again.',
    openAQuotaError: 'OpenAI quota exhausted. Check your plan and billing details at https://platform.openai.com/account/billing',
    // Upload
    selectImageFile: 'Select image file',
    maxTwoPhotos: 'Maximum 2 photos allowed',
    uploadCoachInstructions: 'Upload 2 screenshots: first with main data and competences, second with connection (optional).',
    dragDropPhotos: 'Drag photos here or click to select',
    maxTwoPhotosFormat: 'Maximum 2 photos â€¢ Formats: JPG, PNG',
    mainPhoto: 'Main photo',
    connectionPhoto: 'Connection',
    addPhoto: 'Add photo',
    // Playing style names
    possesso_palla: 'Ball Possession',
    contropiede_veloce: 'Quick Counter',
    contrattacco: 'Counter Attack',
    vie_laterali: 'Wide',
    passaggio_lungo: 'Long Ball',
    dataMismatch: 'WARNING: Data mismatch!',
    nameDifferent: 'Name is different',
    teamDifferent: 'Team is different',
    positionDifferent: 'Position is different',
    ageDifferent: 'Age is different',
    ensureSamePlayer: 'Make sure the photo is of the same player before proceeding.',
    confirmAnyway: 'Confirm anyway',
    confirm: 'Confirm',
    selectedPlayer: 'Selected player',
    clickAnotherPlayer: 'Click another player to swap',
    selected: 'Selected',
    noStarters: 'No starters',
    uploadFormationFirst: 'Upload formation first',
    noReserves: 'No reserves',
    uploadPlayerCards: 'Upload player cards to add reserves',
    // Error messages
    formationOneImageOnly: 'For formation you can upload only 1 image',
    formationAlreadyUploaded: 'You have already uploaded a formation photo. Remove it before uploading another.',
    formationOneImageRequired: 'For formation you must upload exactly 1 image',
    maxThreeImages: 'Maximum 3 images allowed',
    maxThreeImagesAlready: 'You can upload maximum 3 images. You already have',
    images: 'images',
    warning: 'Warning',
    playerSavedAsReserve: 'player saved as reserve',
    playersSavedAsReserves: 'players saved as reserves',
    formationExtractionFailed: 'Unable to extract players from formation',
    playerExtractionFailed: 'Unable to extract player data',
    formationExtractionError: 'Error during formation extraction',
    uploadError: 'Error during analysis and saving',
    savingPlayer: 'Saving player',
    savingTitolari: 'Saving {count} starters...',
    uploadInstructions: 'Upload 1-3 eFootball player screenshots. Click "Validate upload" to analyze and save automatically.',
    playersSavedAsReservesCount: '{count} player(s) saved as reserves!',
    player: 'Player',
    image: 'Image',
    clickOrDragImage: 'Click or drag image here',
    formationImageFormat: 'Supported formats: JPG, PNG | 1 image (complete formation)',
    cardImageFormat: 'Supported formats: JPG, PNG | Maximum 3 images (reserves)',
    invalidSession: 'Invalid session. Please login again.',
    formationUpdated: 'Formation updated successfully!',
    swapFormationError: 'Formation swap error',
    loadPlayersError: 'Error loading players',
    // Coaches
    coaches: 'Coaches',
    coachesTitle: 'Coaches',
    uploadCoach: 'Upload Coach',
    noCoachesLoaded: 'No coaches loaded',
    uploadCoachDescription: 'Upload a coach by loading a screenshot from the game',
    uploadFirstCoach: 'Upload First Coach',
    activeCoach: 'Active Coach',
    activeCoachInfo: 'This coach is currently active and influences the team\'s playing style competence.',
    coachDetails: 'Coach Details',
    viewCoachDetails: 'Coach Details',
    setAsTitular: 'Set as Titular',
    deleteCoach: 'Delete Coach',
    confirmDeleteCoach: 'Are you sure you want to delete this coach?',
    selectCoachScreenshot: 'Select coach screenshot:',
    coachUploaded: 'Coach uploaded',
    coachDeleted: 'Coach deleted',
    coachSetActive: 'Coach set as titular',
    informations: 'Information',
    playingStyleCompetence: 'Playing Style Competence',
    trainingAffinity: 'Training Affinity',
    statBoosters: 'Stat Boosters',
    connection: 'Connection',
    focalPoint: 'Focal Point',
    keyMan: 'Key Man',
    loading: 'Loading...',
    cancel: 'Cancel',
    upload: 'Upload',
    uploadCoachBtn: 'Upload Coach',
    category: 'Category',
    type: 'Type',
    coachesLink: 'Coaches',
    coachActiveTitle: 'Active Coach',
    // Errors
    sessionExpired: 'Session expired',
    unknownError: 'Unknown error',
    coachLoadError: 'Error loading coaches',
    coachDataLoadError: 'Error loading data',
    coachSaveError: 'Error saving coach',
    coachUploadError: 'Error uploading coach',
    coachSetActiveError: 'Error setting active coach',
    coachDeleteError: 'Error deleting coach',
    coachExtractError: 'Error: coach data not extracted. Check images and try again.',
    openAQuotaError: 'OpenAI quota exhausted. Check your plan and billing details at https://platform.openai.com/account/billing',
    // Upload
    selectImageFile: 'Select image file',
    maxTwoPhotos: 'Maximum 2 photos allowed',
    uploadCoachInstructions: 'Upload 2 screenshots: first with main data and competences, second with connection (optional).',
    dragDropPhotos: 'Drag photos here or click to select',
    maxTwoPhotosFormat: 'Maximum 2 photos â€¢ Formats: JPG, PNG',
    mainPhoto: 'Main photo',
    connectionPhoto: 'Connection',
    addPhoto: 'Add photo',
    // Playing style names
    possesso_palla: 'Ball Possession',
    contropiede_veloce: 'Quick Counter',
    contrattacco: 'Counter Attack',
    vie_laterali: 'Wide',
    passaggio_lungo: 'Long Ball',
    // Tactical Settings - Team Playing Style
    teamPlayingStyle: 'Team Playing Style',
    teamPlayingStyleDescription: 'Select the tactical approach for your team',
    // Individual Instructions
    individualInstructions: 'Individual Instructions',
    individualInstructionsDescription: 'Assign specific instructions to players',
    attack1: 'Attack 1',
    attack1Description: 'Instructions for attacking players (left side)',
    attack2: 'Attack 2',
    attack2Description: 'Instructions for attacking players (right side)',
    defense1: 'Defense 1',
    defense1Description: 'Instructions for defensive players (left side)',
    defense2: 'Defense 2',
    defense2Description: 'Instructions for defensive players (right side)',
    selectInstruction: 'Select Instruction',
    selectPlayer: 'Select Player',
    instruction: 'Instruction',
    player: 'Player',
    noPlayerSelected: 'No player selected',
    noInstructionSelected: 'No instruction selected',
    noCompatiblePlayers: 'No compatible players available',
    // Individual Instructions - Attack
    anchoring: 'Anchoring',
    anchoringDescription: 'Player stays in fixed position, maintains central density',
    attackSpace: 'Attack Space',
    attackSpaceDescription: 'Player seeks spaces in depth to create scoring opportunities',
    counterTarget: 'Counter Target',
    counterTargetDescription: 'Player is the target for counter-attacks, stays high ready for quick transitions',
    offensive: 'Offensive',
    offensiveDescription: 'Player actively participates in attacks, pushes forward',
    // Individual Instructions - Defense
    deepLine: 'Deep Line',
    deepLineDescription: 'Player drops deep, aligns with defenders, covers spaces behind',
    defensive: 'Defensive',
    defensiveDescription: 'Player stays back, limits forward runs, protects from counter-attacks',
    tightMarking: 'Tight Marking',
    tightMarkingDescription: 'Player marks opponent closely, follows movements',
    manMarking: 'Man Marking',
    manMarkingDescription: 'Player marks specific opponent one-on-one throughout the match',
    // Tactical Settings - Save
    tacticalSettings: 'Tactical Settings',
    saveTacticalSettings: 'Save Tactical Settings',
    tacticalSettingsSaved: 'Tactical settings saved successfully',
    tacticalSettingsError: 'Error saving tactical settings',
    loadingTacticalSettings: 'Loading tactical settings...',
  }
}

import React from 'react'

// Create Context for global language state
const LanguageContext = React.createContext()

export function LanguageProvider({ children }) {
  const [lang, setLang] = React.useState(() => {
    if (typeof window !== 'undefined') {
      const saved = localStorage.getItem('app_language')
      return saved || 'it'
    }
    return 'it'
  })

  const t = React.useCallback((key) => {
    return translations[lang]?.[key] || translations.en[key] || key
  }, [lang])

  const changeLanguage = React.useCallback((newLang) => {
    setLang(newLang)
    if (typeof window !== 'undefined') {
      localStorage.setItem('app_language', newLang)
    }
  }, [])

  const value = React.useMemo(() => ({
    t,
    lang,
    changeLanguage
  }), [t, lang, changeLanguage])

  return (
    <LanguageContext.Provider value={value}>
      {children}
    </LanguageContext.Provider>
  )
}

// Helper function that can be used outside React components
export function getTranslation(key, lang = null) {
  if (!lang && typeof window !== 'undefined') {
    lang = localStorage.getItem('app_language') || 'it'
  }
  lang = lang || 'it'
  return translations[lang]?.[key] || translations.en[key] || key
}

export function useTranslation() {
  const context = React.useContext(LanguageContext)
  if (!context) {
    // Fallback if used outside provider - use helper function
    const getLang = () => {
      if (typeof window !== 'undefined') {
        return localStorage.getItem('app_language') || 'it'
      }
      return 'it'
    }
    return {
      t: (key) => getTranslation(key, getLang()),
      lang: getLang(),
      changeLanguage: (newLang) => {
        if (typeof window !== 'undefined') {
          localStorage.setItem('app_language', newLang)
          window.location.reload()
        }
      }
    }
  }
  return context
}
